import { resolve } from "node:path";
import { createSyncFn } from "synckit";
import { getTailwindConfigPath } from "./config.js";
import { getTailwindcssVersion } from "../async-utils/version.js";
import { getWorkerOptions } from "../async-utils/worker.js";
export function getClassVariants({ classes, configPath, cwd }) {
    const { path, warning } = getTailwindConfigPath({ configPath, cwd });
    const classVariants = getClassVariantsSync({ classes, configPath: path });
    return { classVariants, warnings: [warning] };
}
const getClassVariantsSync = createSyncFn(getWorkerPath(), getWorkerOptions());
function getWorkerPath() {
    const { major } = getTailwindcssVersion();
    return resolve(getCurrentDirectory(), `./class-variants.async.v${major}.js`);
}
function getCurrentDirectory() {
    // eslint-disable-next-line eslint-plugin-typescript/prefer-ts-expect-error
    // @ts-ignore - `import.meta` doesn't exist in CommonJS -> will be transformed in build step
    return import.meta.dirname;
}
//# sourceMappingURL=class-variants.js.map