// runner.js
import { resolve } from "node:path";
import { createSyncFn } from "synckit";
import { getTailwindConfigPath } from "./config.js";
import { invalidateByModifiedDate, withCache } from "../async-utils/cache.js";
import { getWorkerOptions } from "../async-utils/worker.js";
export function getCustomComponentClasses({ configPath, cwd }) {
    const { path } = getTailwindConfigPath({ configPath, cwd });
    return withCache("custom-components", () => {
        return getCustomComponentClassesSync({ configPath: path });
    }, date => invalidateByModifiedDate(date, path));
}
const getCustomComponentClassesSync = createSyncFn(getWorkerPath(), getWorkerOptions());
function getWorkerPath() {
    return resolve(getCurrentDirectory(), "./custom-component-classes.async.js");
}
function getCurrentDirectory() {
    // eslint-disable-next-line eslint-plugin-typescript/prefer-ts-expect-error
    // @ts-ignore - `import.meta` doesn't exist in CommonJS -> will be transformed in build step
    return import.meta.dirname;
}
//# sourceMappingURL=custom-component-classes.js.map